var Route=function(){var t=!1,e=[],r=[],n=function(){_bindRoutes=function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var r=t.length-1,n=0;r>=n;r--)this.route(t[r][0],t[r][1],this[t[r][1]],this)}},_bindRoutes.call(this),this.initialize()};n.routeInit=function(t){console.log("router :"+t);try{new window[t+"Route"]}catch(e){return console.log(t+"Route:"+e.type),void 0}n.start()},n.start=function(){function e(){var t=window.location.hash;this.trigger(t.replace(o.routeStripper,"")),n.triggerHashEvent()}if(!t){var r=this;return"onhashchange"in window?window.onhashchange=function(){e.call(r.prototype)}:setInterval(function(){var t=window.location.hash;t!=r.fragment&&(r.fragment=t,e.call(r.prototype))},50),this.fragment=window.location.hash,e.call(this.prototype),t=!0}return!1},n.triggerHashEvent=function(){for(var t,e=window.location.hash,o=n.hashSplit(e),a=0,i=r.length-1;i>=a;i--)t=r[i].callback,console.log("[Route event trigger]   --->  [hash : "+e+"]   [hash frag : "+o+"]"),t&&"function"==typeof t&&t.apply(this,[e,o])},n.prototype.trigger=function(t){var r;return o.any(e,function(e){if(e.route.test(t)){var n=e.routeModel.beforeRoute,o=e.routeModel.afterRoute;return n&&n.call(e.routeModel),e.callback(t),o&&o.call(e.routeModel),r={name:e.name},!0}}),r},n.hashSplit=function(t){return t.replace(o.paramStripper,"").split("/")},n.register=function(e,o){r.push({callback:o,name:e}),t&&n.triggerHashEvent()},n.extend=function(t){var e=function(){for(var e in t)this[e]=t[e];n.call(this)};return e.prototype=n.prototype,e},n.prototype.route=function(t,e,r,n){t instanceof RegExp||(t=o._routeToRegExp(t)),r||(r=this[e]),this.listen(t,e,o.bind(function(e){var n=o._extractParameters(t,e);return r?r.apply(this,n):void 0},this),n)},n.prototype.listen=function(t,r,n,o){e.push({route:t,name:r,callback:n,routeModel:o})};var o={namedParam:/:\w+/g,splatParam:/\*\w+/g,escapeRegExp:/[-[\]{}()+?.,\\^$|#\s]/g,routeStripper:/^[#\/]/,paramStripper:/^#!/,_routeToRegExp:function(t){return t=""!=t?t.replace(this.escapeRegExp,"\\$&").replace(this.namedParam,"([^/]+)").replace(this.splatParam,"(.*?)"):t,new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)},isRegExp:function(t){return t instanceof RegExp},bind:function(t,e){return t.bind?Function.bind.apply(t,Array.prototype.slice.call(arguments,1)):function(r){t.call(e,r)}},any:function(t,e,r){var n=!1;if(null==t)return n;if(t.some)return t.some(e,r);for(var o=0,a=t.length-1;a>=o&&!n&&!(n=e.call(r,t[a],a));a--);return!!n}};return n}();